<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/x-icon" href="https://cdn.glitch.global/5fbfde84-4f5e-46c9-b02b-7de045bf80b7/favicon.ico?v=1664757688575">

    <title>IC@Y Cell Counter</title>

    <!-- Import the webpage's stylesheet -->
    <link rel="stylesheet" href="css/style.css" />

    <!-- Import the webpage's javascript file -->
    <script src="js/tabs.js" defer></script>
    <script src="js/utils.js" defer></script>
    <script src="js/script.js" defer></script>
    <script src="js/imagefilters.js" defer></script>
    <script src="js/keyBoardControls.js" defer></script>
    <script src="js/simpleStatistics.js" defer></script>

    <script src="js/count.js" defer></script>
    <script src="js/openCvPredictions.js" defer></script>
    <script src="js/openCvBlobDataCollection.js" defer></script>

    <script>

    </script>
    
  </head>
  <body>
    <h2>IC@Y Cell Counter</h2>
  
    <video autoplay></video>
     
    <div class="slidecontainer">
      <input id="boxLength" type="range" min="0" max="768" value="470">
         <b>    Box Length: <span id="demo"></span></b>
     </div>
     <script>
     var slider = document.getElementById("boxLength");
     var output = document.getElementById("demo");
     output.innerHTML = slider.value;
 
     slider.oninput = function() {
       output.innerHTML = this.value;
     }
     </script>



    <div class="tab">
      <button class="tablinks" id="defaultOpen" onclick="openTab(event, 'Manual')">Count</button>
      <button class="tablinks" onclick="openTab(event, 'Automatic')">Automatic Settings</button>
      <button class="tablinks" onclick="resetCounts()">Reset</button>
    </div>
    
    <div id="Manual" class="tabcontent">
      <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
      <h3>Manual & Automatic Counter</h3>
      <p>To take manual counts, press the appropriate keys for the specific cell type:</p>
      <p>J (Live), K (Budding), L (Dead), R (Reset)</p>
      <p>Once you complete the manual count, press enter to perform the automatic count</p>
      <p>Record the Counts and accuracies in the microscope testing file for that day</p>
      
      <h5>Manual Counts</h5>

      <table>
        <tr>
          <th>Boxes counted</th>
          <th>Live Cells (J)</th>
          <th>Budding Cells (K)</th>
          <th>Dead Cells (L)</th>
          <th>Total Cells</th>
          <th>Viability</th>
        </tr>
        <tr id="manualValues">
          <td id="boxesManual">0</td>
          <td id="liveManual">0</td>
          <td id="buddingManual">0</td>
          <td id="deadManual">0</td>
          <td id="totalManual">0</td>
          <td id="viabilityManual">0</td>
        </tr>
      </table>

      <p> 
        <button class="countButton" id="copy_manual" onclick="copyManual()">Copy</button>
        <button class="countButton" onclick='resetManual()'>Reset</button>
      </p>

      <!-- <button class="countButton" onclick="estimateCounts()">
        Count
      </button> -->
      <hr>
      <h5>Automatic Counts</h5>
       
      <table>
        <tr>
          <th>Boxes counted</th>
          <th>Live Cells</th>
          <th>Budding Cells</th>
          <th>Dead Cells</th>
          <th>Total Cells</th>
          <th>Viability</th>
        </tr>
        <tr id="autoValues">
          <td id="boxesAuto">0</td>
          <td id="liveAuto">0</td>
          <td id="buddingAuto">0</td>
          <td id="deadAuto">0</td>
          <td id="totalAuto">0</td>
          <td id="viabilityAuto">0</td>
        </tr>
      </table>

      <p> 
        <button class="countButton" id="copy_auto">Copy</button>
        <button class="countButton" onclick='resetAuto()'>Reset</button>
      </p>

      <table>
        <tr>
          <th>Total Accuracy</th>
          <th>Viability Accuracy</th>
          <th>Budding Accuracy</th>
        </tr>
        <tr id="resultsValues">
          <td id="totalAccuracy">0</td>
          <td id="viabilityAccuracy">0</td>
          <td id="buddingAccuracy">0</td>
        </tr>
      </table>

      <p>        
        <button class="countButton" id="copy_results">Copy</button>
      </p>



    </div>
    
    <div id="Automatic" class="tabcontent">
      <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
      <h3>Automatic Counter Settings</h3>

      <p>Adjust the box size using the slider above to resize your region of interest</p>
      <p>Prepare a clean yeast sample to run testing with. Then press B to generate parameters</p> 


      <table>
        <tr>
          <th>Median Circularity</th>
          <th>Stdev Circularity</th>
          <th>Median Inertia</th>
          <th>Stdev Inertia</th>
          <th>Median Convexity</th>
          <th>Stdev Convexity</th>
        </tr>
        <tr>
          <td id="medianCircularity">0</td>
          <td id="stdevCircularity">0</td>
          <td id="medianInertia">0</td>
          <td id="stdevInertia">0</td>
          <td id="medianConvexity">0</td>
          <td id="stdevConvexity">0</td>
        </tr>
      </table>

      <h5>Yeast Blob Data Array:</h5>
      <p id="blobData"></p>

    </div>
    
    <div id="canvasBox">
    
      <img src="https://cdn.glitch.global/5fbfde84-4f5e-46c9-b02b-7de045bf80b7/1.png" id="map"> 
       <p>
       <canvas id="canvasInput"></canvas>
         </p>

         <p>
          <canvas id="canvasOutput"></canvas>
        </p>
  

    </div>

    <!-- <canvas id="canvasInput"></canvas>
    <canvas id="canvasOutput"></canvas> -->
    
    <script src ="js/opencv/opencv.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- <script async src="https://docs.opencv.org/3.4.0/opencv.js" type="text/javascript"></script> -->
  </body>
</html>
